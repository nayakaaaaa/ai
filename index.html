<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gemini Chatbot</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap" rel="stylesheet">
  <style>
    body { font-family: Lato; background: #f4f4f4; padding: 20px; }
    #chatbox { width: 100%; max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
    #messages { height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    .user { color: blue; margin: 5px 0; }
    .bot { color: green; margin: 5px 0; }
    #inputBox { display: flex; }
    #userInput { flex: 1; padding: 10px; }
    button { padding: 10px; }
  </style>
  <!-- Load Gemini SDK -->
  <script type="module">
    import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

    const API_KEY = "AIzaSyCYKHNF4mQzAXt-ObtsF4auzu-dNEe90hc"; // <--- ganti dengan API key kamu
    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

    async function sendMessage() {
      const input = document.getElementById("userInput");
      const messages = document.getElementById("messages");
      const userText = input.value.trim();
      if (!userText) return;

      // tampilkan pesan user
      messages.innerHTML += `<div class="user">You: ${userText}</div>`;
      input.value = "";

      // panggil API Gemini
      try {
        const result = await model.generateContent(userText);
        const botReply = result.response.text();
        messages.innerHTML += `<div class="bot">Bot: ${botReply}</div>`;
        messages.scrollTop = messages.scrollHeight;
      } catch (err) {
        messages.innerHTML += `<div class="bot">[Error] ${err.message}</div>`;
      }
    }

    window.sendMessage = sendMessage;
  </script>
</head>
<body>
  <div id="chatbox">
    <h2>ðŸ¤– Gemini Chatbot</h2>
    <div id="messages"></div>
    <div id="inputBox">
      <input type="text" id="userInput" placeholder="Ketik pesan..." onkeydown="if(event.key==='Enter') sendMessage()">
      <button onclick="sendMessage()">Kirim</button>
    </div>
  </div>
</body>
</html>
